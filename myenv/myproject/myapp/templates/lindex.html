{% extends "slidebar.html" %}

{% block title %}InsureBee Admin Dashboard{% endblock %}

{% block page_title %}Welcome {{ user.name }}{% endblock %}

{% block additional_styles %}
/* Dashboard Stats */
.stats-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card .stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: rgba(255, 193, 7, 0.2);
    color: var(--primary);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    margin-bottom: 15px;
}

.stat-card h3 {
    font-size: 14px;
    color: #666;
    margin-bottom: 10px;
}

.stat-card .stat-value {
    font-size: 24px;
    font-weight: bold;
    color: var(--text-dark);
}

.stat-card .stat-change {
    margin-top: 10px;
    font-size: 14px;
}

.positive-change {
    color: #4caf50;
}

.negative-change {
    color: #f44336;
}

/* Insurance Providers Section */
.section-title {
    margin-bottom: 20px;
    color: var(--text-dark);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.add-button {
    background-color: var(--primary);
    color: var(--text-dark);
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    transition: background-color 0.3s;
}

.add-button:hover {
    background-color: var(--primary-dark);
}

.add-button i {
    margin-right: 5px;
}

.providers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.provider-card {
    background-color: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
}

.provider-card:hover {
    transform: translateY(-5px);
}

.provider-header {
    padding: 15px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid #eee;
}

.provider-logo {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    background-color: var(--light-gray);
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 15px;
}

.provider-name {
    font-weight: bold;
    color: var(--text-dark);
}

.provider-status {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-left: auto;
}

.status-active {
    background-color: rgba(76, 175, 80, 0.2);
    color: #4caf50;
}

.status-pending {
    background-color: rgba(255, 193, 7, 0.2);
    color: var(--primary);
}

.provider-body {
    padding: 15px;
}

.provider-stat {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.provider-actions {
    display: flex;
    justify-content: space-between;
    padding: 15px;
    border-top: 1px solid #eee;
}

.action-button {
    padding: 8px 15px;
    border-radius: 4px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.view-button {
    background-color: rgba(255, 193, 7, 0.2);
    color: var(--primary-dark);
}

.view-button:hover {
    background-color: rgba(255, 193, 7, 0.4);
}

.edit-button {
    background-color: rgba(33, 150, 243, 0.1);
    color: #2196f3;
}

.edit-button:hover {
    background-color: rgba(33, 150, 243, 0.2);
}

/* Recent Activities Section */
.activities-container {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.activity-item {
    display: flex;
    align-items: center;
    padding: 15px 0;
    border-bottom: 1px solid #eee;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 15px;
    flex-shrink: 0;
}

.icon-add {
    background-color: rgba(76, 175, 80, 0.2);
    color: #4caf50;
}

.icon-update {
    background-color: rgba(33, 150, 243, 0.2);
    color: #2196f3;
}

.icon-delete {
    background-color: rgba(244, 67, 54, 0.2);
    color: #f44336;
}

.activity-details {
    flex: 1;
}

.activity-message {
    margin-bottom: 5px;
    color: var(--text-dark);
}

.activity-message span {
    font-weight: bold;
}

.activity-time {
    font-size: 12px;
    color: #888;
}

@media (max-width: 768px) {
    .stats-container {
        grid-template-columns: 1fr;
    }
    
    .providers-grid {
        grid-template-columns: 1fr;
    }
}
#add-provider-btn {
    text-decoration: none;
    color: black; /* or whatever color you prefer */
}

#add-provider-btn:hover {
    color: white; /* maintain color on hover */
    text-decoration: none;
}

{% endblock %}

{% block content %}
<!-- Dashboard Stats -->
<div class="stats-container">
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-file-alt"></i>
        </div>
        <h3>TOTAL POLICIES</h3>
        <div class="stat-value">{{ total_policy }}</div>
        <div class="stat-change positive-change">
            <i class="fas fa-arrow-up"></i> 12% this month
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-users"></i>
        </div>
        <h3>ACTIVE CUSTOMERS</h3>
        <div class="stat-value">{{ total_active_customers }}</div>
        <div class="stat-change positive-change">
            <i class="fas fa-arrow-up"></i> 8% this month
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-money-bill-wave"></i>
        </div>
        <h3>PREMIUM COLLECTED</h3>
        <div class="stat-value">₹{{ total_premium_collected }}</div>
        <div class="stat-change positive-change">
            <i class="fas fa-arrow-up"></i> 15% this month
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-building"></i>
        </div>
        <h3>INSURANCE PARTNERS</h3>
        <div class="stat-value">{{ active_policies }}</div>
        <div class="stat-change positive-change">
            <i class="fas fa-arrow-up"></i> 2 new this month
        </div>
    </div>
</div>

<!-- Insurance Providers Section -->
<div class="section-title">
    <h2>Insurance Providers</h2>
    <button class="add-button">
        <a href="{% url 'addin' %}" class="btn btn-primary" id="add-provider-btn">
            <i class="fas fa-plus"></i> Add Provider
        </a>
    </button>
</div>

<div class="providers-grid">
    {% for i in policy %}
    <div class="provider-card">
        <div class="provider-header">
            <div class="provider-logo">
                {% if i.policy_type == 'life' %}
                <i class="fas fa-dna"></i>
                {% elif i.policy_type == 'health' %}
                <i class="fas fa-heartbeat"></i>
                {% elif i.policy_type == 'auto' %}
                <i class="fas fa-car"></i>
                {% elif i.policy_type == 'home' %}
                <i class="fas fa-building"></i>
                {% elif i.policy_type == 'business' %}
                <i class="fas fa-briefcase"></i>
                {% endif %}
            </div>
            <div class="provider-name">{{ i.provider }}</div>
            {% if i.status == 'active' %}
            <div class="provider-status status-active">Active</div>
            {% elif i.status == 'pending' %}
            <div class="provider-status status-pending">Pending</div>
            {% endif %}
        </div>
        <div class="provider-body">
            <div class="provider-stat">
                <div>Duration</div>
                <div>{{ i.duration }}</div>
            </div>
            <div class="provider-stat">
                <div>Premium Collected</div>
                <div>₹{{ i.premium_amount }}</div>
            </div>
            <div class="provider-stat">
                <div>Policy Type</div>
                <div>{{ i.policy_type }} Insurance</div>
            </div>
        </div>
        <div class="provider-actions">
            <div class="action-button view-button" onclick="window.location.href='{% url 'viewins' policy_id=i.id %}'">View Details</div>
            <div class="action-button edit-button">Edit</div>
        </div>
    </div>
    {% endfor %}
</div>


{% endblock %}

{% block additional_scripts %}
// Add handler for "Add New Provider" button
document.querySelector('.add-button').addEventListener('click', function() {
    alert('Add new provider form will appear here');
});

// Add interactivity to provider cards
document.querySelectorAll('.action-button').forEach(button => {
    button.addEventListener('click', function(e) {
        e.stopPropagation();
        
        // Show loading animation
        document.getElementById('loading-screen').style.display = 'flex';
        
        // Hide loading after a delay to simulate action processing
        setTimeout(() => {
            document.getElementById('loading-screen').style.display = 'none';
            // Add actual functionality here in a real application
        }, 1000);
    });
});
{% endblock %}