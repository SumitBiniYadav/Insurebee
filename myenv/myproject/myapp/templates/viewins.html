{% extends "slidebar.html" %}

{% block title %}InsureBee - View Insurance Policy{% endblock %}

{% block page_title %}Insurance Policy Details{% endblock %}

{% block additional_styles %}
    /* Insurance Policy View Specific Styles */
    .policy-container {
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        overflow: hidden;
        margin-bottom: 30px;
    }
    
    .policy-header {
        background-color: var(--light-gray);
        padding: 25px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .policy-title {
        display: flex;
        align-items: center;
    }
    
    .policy-logo {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background-color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 20px;
        overflow: hidden;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .policy-logo img {
        width: 80%;
        height: auto;
    }
    
    .policy-name {
        font-size: 24px;
        font-weight: 700;
        color: var(--text-dark);
    }
    
    .policy-type {
        font-size: 16px;
        color: #666;
        margin-top: 5px;
    }
    
    .policy-actions {
        display: flex;
        align-items: center;
    }
    
    .policy-status {
        margin-right: 20px;
    }
    
    .badge {
        display: inline-block;
        padding: 8px 15px;
        border-radius: 50px;
        font-size: 14px;
        font-weight: 600;
    }
    
    .badge-success {
        background-color: #e6f7ed;
        color: #0a6634;
    }
    
    .badge-warning {
        background-color: #fff8e6;
        color: #8a5700;
    }
    
    .badge-danger {
        background-color: #fde8e4;
        color: #b42318;
    }
    
    .btn {
        padding: 10px 20px;
        border-radius: 50px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        display: flex;
        align-items: center;
        transition: all 0.3s;
        margin-left: 10px;
    }
    
    .btn-primary {
        background-color: var(--primary);
        color: var(--text-dark);
    }
    
    .btn-primary:hover {
        background-color: var(--primary-dark);
    }
    
    .btn-danger {
        background-color: #fde8e4;
        color: #b42318;
    }
    
    .btn-danger:hover {
        background-color: #fdd1c7;
    }
    
    .btn i {
        margin-right: 8px;
    }
    
    .policy-sections {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        padding: 25px;
    }
    
    .section-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 25px;
    }
    
    .info-item {
        padding: 15px;
        background-color: var(--light-gray);
        border-radius: 8px;
    }
    
    .info-label {
        font-size: 14px;
        color: #666;
        margin-bottom: 5px;
    }
    
    .info-value {
        font-size: 16px;
        font-weight: 600;
        color: var(--text-dark);
    }
    
    .coverage-details {
        margin-bottom: 25px;
    }
    
    .coverage-item {
        display: flex;
        justify-content: space-between;
        padding: 15px 0;
        border-bottom: 1px solid #eee;
    }
    
    .coverage-item:last-child {
        border-bottom: none;
    }
    
    .coverage-type {
        font-weight: 600;
        color: var(--text-dark);
    }
    
    .coverage-amount {
        font-weight: 600;
        color: var(--primary-dark);
    }
    
    .policy-documents {
        margin-bottom: 25px;
    }
    
    .document-item {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        background-color: var(--light-gray);
        border-radius: 8px;
        margin-bottom: 10px;
        transition: background-color 0.3s;
    }
    
    .document-item:hover {
        background-color: #e9e9e9;
    }
    
    .document-icon {
        width: 40px;
        height: 40px;
        background-color: #fff;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #666;
        margin-right: 15px;
    }
    
    .document-info {
        flex: 1;
    }
    
    .document-name {
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 3px;
    }
    
    .document-size {
        font-size: 12px;
        color: #666;
    }
    
    .document-actions a {
        color: #666;
        margin-left: 15px;
        transition: color 0.3s;
    }
    
    .document-actions a:hover {
        color: var(--primary-dark);
    }
    
    .policy-notes {
        background-color: var(--light-gray);
        border-radius: 8px;
        padding: 20px;
    }
    
    .note-item {
        padding: 15px;
        background-color: white;
        border-radius: 8px;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .note-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    
    .note-author {
        font-weight: 600;
        color: var(--text-dark);
    }
    
    .note-date {
        font-size: 12px;
        color: #666;
    }
    
    .note-content {
        font-size: 14px;
        color: #444;
        line-height: 1.5;
    }
    
    .add-note {
        margin-top: 20px;
    }
    
    .note-input {
        width: 100%;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        resize: vertical;
        min-height: 100px;
        margin-bottom: 10px;
    }
    
    .timeline {
        margin-top: 20px;
    }
    
    .timeline-item {
        position: relative;
        padding-left: 30px;
        padding-bottom: 20px;
        border-left: 2px solid #ddd;
        margin-left: 15px;
    }
    
    .timeline-item:last-child {
        border-left: none;
    }
    
    .timeline-dot {
        position: absolute;
        width: 15px;
        height: 15px;
        background-color: var(--primary);
        border-radius: 50%;
        left: -8px;
        top: 0;
    }
    
    .timeline-date {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
    }
    
    .timeline-content {
        font-size: 14px;
        color: var(--text-dark);
    }
    
    /* Responsive Styles */
    @media (max-width: 992px) {
        .policy-sections {
            grid-template-columns: 1fr;
        }
    }
    
    @media (max-width: 768px) {
        .info-grid {
            grid-template-columns: 1fr;
        }
        
        .policy-header {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .policy-actions {
            margin-top: 20px;
            width: 100%;
            justify-content: space-between;
        }
    }
    .section-title {
        font-weight: bold;
        font-size: 24px;
      }
{% endblock %}

{% block content %}
    <!-- Back Button -->
    <div style="margin-bottom: 20px;">
        <a href="{% url 'provider' %}" class="btn btn-secondary" style="text-decoration: none;">
            <i class="fas fa-arrow-left"></i> Back to Providers
        </a>
    </div>

    <!-- Policy Details Container -->
    <div class="policy-container">
        <!-- Policy Header -->
        <div class="policy-header">
            <div class="policy-title">
                <div class="policy-logo">
                    <img src="{{ policy.providerim.url }}" alt="{{ policy.provider }}">
                </div>
                <div>
                    <div class="policy-name">{{ policy.provider }}</div>
                    <div class="policy-type">{{ policy.policy_type|capfirst }} Insurance</div>
                </div>
            </div>
            <div class="policy-actions">
                {% if policy.status == 'active' %}
                <div class="policy-status">
                    <span class="badge badge-success">Active</span>
                </div>
                {% else %}
                <div class="policy-status">
                    <span class="badge badge-warning">Inactive</span>
                </div>
                {% endif %}
                <button class="btn btn-primary">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn btn-danger">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        </div>
        
        <!-- Policy Content -->
        <div class="policy-sections">
            <!-- Left Section -->
            <div class="main-section">
                <!-- Basic Information -->
                <div class="section-title">Basic Information</div>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Policy ID</div>
                        <div class="info-value">{{ policy.id }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Policy Number</div>
                        <div class="info-value">INS-{{ policy.id }}-{{ policy.provider|slice:":3"|upper }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Status</div>
                        <div class="info-value">{{ policy.status }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Start Date</div>
                        <div class="info-value">{{ policy.coverage_start_date|date:"M d, Y" }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">End Date</div>
                        <div class="info-value">{{ policy.coverage_end_date|date:"M d, Y" }}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Duration</div>
                        <div class="info-value">{{ policy.duration }} Years</div>
                    </div>
                </div>
                
                <!-- Coverage Details -->
                <div class="section-title">Coverage Details</div>
                <div class="coverage-details">
                    <div class="coverage-item">
                        <div class="coverage-type">Coverage Amount</div>
                        <div class="coverage-amount">₹{{ policy.coverage_amount }}</div>
                    </div>
                    <div class="coverage-item">
                        <div class="coverage-type">Premium</div>
                        <div class="coverage-amount">₹{{ policy.premium_amount }}</div>
                    </div>
                </div>

                <!-- Insurance Details -->
                <div class="section-title">Insurance Details</div>
                <div class="coverage-details">
                    <div class="co-content">{{ policy.description }}</div>
                </div>
                
                <!-- Policy Documents -->
                <div class="section-title">Policy Documents</div>
                <div class="policy-documents">
                    <div class="document-item">
                        <div class="document-icon">
                            <i class="far fa-file-pdf"></i>
                        </div>
                        <div class="document-info">
                            <div class="document-name">Policy Agreement</div>
                            <div class="document-size">PDF • 2.4 MB</div>
                        </div>
                        <div class="document-actions">
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="View"><i class="fas fa-eye"></i></a>
                        </div>
                    </div>
                    <div class="document-item">
                        <div class="document-icon">
                            <i class="far fa-file-pdf"></i>
                        </div>
                        <div class="document-info">
                            <div class="document-name">Terms and Conditions</div>
                            <div class="document-size">PDF • 1.2 MB</div>
                        </div>
                        <div class="document-actions">
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="View"><i class="fas fa-eye"></i></a>
                        </div>
                    </div>
                    <div class="document-item">
                        <div class="document-icon">
                            <i class="far fa-file-image"></i>
                        </div>
                        <div class="document-info">
                            <div class="document-name">Proof of Insurance</div>
                            <div class="document-size">JPG • 305 KB</div>
                        </div>
                        <div class="document-actions">
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="View"><i class="fas fa-eye"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Section -->
            <div class="side-section">
                <!-- Policy Notes -->
                <div class="section-title">Features</div>
                <div class="policy-notes">
                    {% for feature in features %}
                    <div class="note-item">
                        <div class="note-header">
                            <div class="note-author">{{ feature.title }}</div>
                        </div>
                        <div class="note-content">
                           {{ feature.detail }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Activity Timeline -->
                <div class="section-title" style="margin-top: 25px;">Activity Timeline</div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-date">Apr 20, 2025</div>
                        <div class="timeline-content">Policy renewed for another year</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-date">Apr 15, 2025</div>
                        <div class="timeline-content">Premium payment received</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-date">Mar 30, 2025</div>
                        <div class="timeline-content">Renewal notice sent to client</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-date">Apr 20, 2024</div>
                        <div class="timeline-content">Policy activated</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block additional_scripts %}
    // Add any specific scripts for this page
    document.addEventListener('DOMContentLoaded', function() {
        // Example of dynamic content loading
        const editButton = document.querySelector('.btn-primary');
        if (editButton) {
            editButton.addEventListener('click', function() {
                window.location.href = "#";
            });
        }
        
        const deleteButton = document.querySelector('.btn-danger');
        if (deleteButton) {
            deleteButton.addEventListener('click', function() {
                if (confirm('Are you sure you want to delete this policy?')) {
                    window.location.href = "#";
                }
            });
        }
    });
{% endblock %}